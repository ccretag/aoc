<html>
<body>
    <h1>aocTest</h1>
    <canvas id="Canvas1" width="800" height="500" style="border: 1px solid black;">
<script>
var c1 = document.getElementById("Canvas1");
var ct1 = c1.getContext("2d");
var i   
var lines = [], mynums=[], winnums=[]
    var total=0,count=0
    fileLoad();
    async function fileLoad() {
  try {
    const response = await fetch('test.txt');
    const data = await response.text();
    lines = data.split('\n');
  } catch (error) {
    alert('Error reading file:'+error);
  }
 display()
        alert("total= "+total)
 }

function display(){   
    ct1.fillText("Data lines="+lines.length,0,20)
    len=lines.length-1
    for (i=0;i<len;i++){
        ct1.fillText(i+" - "+lines[i],5,40+2*i)
        spl(i)
        ct1.fillText(total, 600+(40*i %200),30+2*i)
    }

  
}

function spl(n){
    var    nocolon=[], nums=[]
        nocolon=lines[n].split(":")
    nums=nocolon[1].split("|")
    mynums=nums[0].split(' ')
//    alert("mynums="+mynums)
    winnums=nums[1].split(' ')
 //   alert("winnums="+winnums)
count=0
    for (c=0; c<mynums.length;c++){
        if (mynums[c]!="" && winnums.includes(mynums[c])) {count++}
    }
    if (count>1){total+=2**count}
}
        
</script>
</body>
</html>
